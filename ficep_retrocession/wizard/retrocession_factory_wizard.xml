<?xml version='1.0' encoding='UTF-8' ?>
<openerp>
    <data noupdate="0">
        <record id="retrocession_factory_wizard_view" model="ir.ui.view">
            <field name="name">retrocession.factory.wizard.view</field>
            <field name="model">retrocession.factory.wizard</field>
            <field name="arch" type="xml">
                <form string="Retrocession generator" version="7.0">                    
                    <sheet>
                       <group name="data_1">
                           <field name="month" attrs="{'required': [('monthly_count', '&gt;', 0)]}"
                                               on_change="onchange_month_year(month, year)"/>
                           <field name="year" on_change="onchange_month_year(month, year)"/>
                       </group>
                       <group/>
                        
                       <group name="counters">
	                        <div class="oe_title">
	                           <separator string="Overview"/>
	                        </div>
	                        <group/>
                            <group>                         
                                <field name="mandate_selected" readonly="1"/>
                                <field name="total_retrocession" readonly="1"/>
                            </group>
                            <group/>                            
                            <div class="oe_title">
                                <separator string="Details"/>
                            </div>
                            <group/>
                            <group>   
                                <field name="yearly_count" readonly="1"/>
                                <field name="yearly_duplicates" readonly="1"/>
                                <field name="monthly_count" readonly="1"/>
                                <field name="monthly_duplicates" readonly="1"/>
                            </group>
                            <group/>                               
                       </group>                       
                        
                       <div name="dev" class="oe_form_sheetbg" groups="ficep_base.res_groups_developper">
                            <div class="oe_formview oe_form_sheet_width">
                                <h3>More Info</h3>
                                <group name="moreinfo">                                
                                </group>
                            </div>
                        </div>
                        <footer>
                            <span name="go-wizard">                              
                                <button string="Generate" name="generate_retrocessions"
                                        type="object" class="oe_highlight" attrs="{'invisible': [('total_retrocession', '=', 0)]}"/>                                
                                or
                            </span>
                            <button string="Cancel" class="oe_link" special="cancel" />
                       </footer>
                   </sheet>
                </form>                             
            </field>
        </record>
        
        <record id="retrocession_factory_wizard_action" model="ir.actions.act_window">
            <field name="name">Generate retrocessions</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="src_model">retrocession</field>
            <field name="res_model">retrocession.factory.wizard</field>
            <field name="target">new</field>
            <field name="view_id" ref="retrocession_factory_wizard_view" />
            <field name="groups_id" eval="[(6, 0, [ref('ficep_base.ficep_res_groups_user')])]" />
        </record> 
        
        <record id="sta_mandate_retrocession_factory" model="ir.values">
            <field name="name">Generate retrocessions</field>
            <field name="model">sta.mandate</field>
            <field name="key">action</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.act_window,%s' % ref('retrocession_factory_wizard_action')" />
        </record>
        
        <record id="ext_mandate_retrocession_factory" model="ir.values">
            <field name="name">Generate retrocessions</field>
            <field name="model">ext.mandate</field>
            <field name="key">action</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.act_window,%s' % ref('retrocession_factory_wizard_action')" />
        </record>    
    </data>
</openerp>